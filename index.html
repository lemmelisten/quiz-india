<!DOCTYPE html>
<html>
<head>
    <title>Quiz Quiz India - Auto Photo Fix</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif; text-align: center; 
            background: #121212 no-repeat center center fixed; 
            background-size: cover; background-blend-mode: overlay;
            color: white; padding: 20px; transition: background-image 0.5s ease;
            min-height: 100vh; display: flex; align-items: center; justify-content: center;
        }
        .quiz-card { 
            background: rgba(30, 30, 30, 0.9); padding: 30px; border-radius: 20px; 
            max-width: 400px; width: 95%; box-shadow: 0 15px 35px rgba(0,0,0,0.8); 
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1);
        }
        .timer { font-size: 50px; color: #ff4757; font-weight: bold; }
        .opt-btn { display: block; width: 100%; padding: 15px; margin: 12px 0; border: none; border-radius: 12px; background: #3742fa; color: white; cursor: pointer; font-size: 16px; font-weight: bold; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="setup-area" class="quiz-card">
        <h2>ðŸ”¥ Quiz Quiz India</h2>
        <p>Auto-Photo Fix Updated! âœ…</p>
        <button class="opt-btn" onclick="startQuiz()">Start Game</button>
    </div>

    <div id="quiz-area" class="quiz-card hidden">
        <div class="timer" id="timer">5</div>
        <h3 id="question-text">Taiyar...</h3>
        <div id="options-box"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAvYTv5CCqE3-l4koXl-7q_1jQG6JZ-rWQ",
            authDomain: "audi-45680.firebaseapp.com",
            projectId: "audi-45680",
            storageBucket: "audi-45680.firebasestorage.app",
            messagingSenderId: "739330497540",
            appId: "1:739330497540:web:e4913add2109dc0c34e951"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        let questions = [];
        let currentIdx = 0;
        let timerInt;

        window.startQuiz = async function() {
            try {
                const querySnapshot = await getDocs(collection(db, "Questions"));
                questions = [];
                querySnapshot.forEach((doc) => questions.push(doc.data()));
                
                if(questions.length > 0) {
                    document.getElementById('setup-area').classList.add('hidden');
                    document.getElementById('quiz-area').classList.remove('hidden');
                    showQuestion();
                } else { alert("Pehle Admin se naye sawal daalein!"); }
            } catch (e) { alert("Error: " + e); }
        }

        function showQuestion() {
            if(currentIdx >= questions.length) { /* Win logic */ return; }
            let q = questions[currentIdx];

            // --- âœ¨ SMART AUTO-PHOTO FIX âœ¨ ---
            let finalImg = "";
            if(q.imageUrl && q.imageUrl.length > 5) {
                finalImg = q.imageUrl;
            } else {
                // Sawal mein se sirf kaam ke words nikalo (Peheli 2 cheezein)
                let keywords = q.q.replace(/[?.,!]/g, "").split(' ').slice(0, 2).join(',');
                finalImg = `https://loremflickr.com/1280/720/${keywords},india`;
            }
            
            // Photo apply karna
            document.body.style.backgroundImage = `url('${finalImg}')`;
            // ----------------------------------

            document.getElementById('question-text').innerText = q.q;
            let box = document.getElementById('options-box');
            box.innerHTML = '';
            q.options.forEach((opt, i) => {
                let btn = document.createElement('button');
                btn.className = 'opt-btn';
                btn.innerText = opt;
                btn.onclick = () => { currentIdx++; showQuestion(); };
                box.appendChild(btn);
            });
            startTimer();
        }

        function startTimer() {
            let time = 5;
            document.getElementById('timer').innerText = time;
            clearInterval(timerInt);
            timerInt = setInterval(() => {
                time--; document.getElementById('timer').innerText = time;
                if(time <= 0) { clearInterval(timerInt); currentIdx++; showQuestion(); }
            }, 1000);
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Quiz Quiz India - Auto Photo Fix</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif; text-align: center; 
            background: #121212 no-repeat center center fixed; 
            background-size: cover; background-blend-mode: overlay;
            color: white; padding: 20px; transition: background-image 0.5s ease;
            min-height: 100vh; display: flex; align-items: center; justify-content: center;
        }
        .quiz-card { 
            background: rgba(30, 30, 30, 0.9); padding: 30px; border-radius: 20px; 
            max-width: 400px; width: 95%; box-shadow: 0 15px 35px rgba(0,0,0,0.8); 
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1);
        }
        .timer { font-size: 50px; color: #ff4757; font-weight: bold; }
        .opt-btn { display: block; width: 100%; padding: 15px; margin: 12px 0; border: none; border-radius: 12px; background: #3742fa; color: white; cursor: pointer; font-size: 16px; font-weight: bold; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="setup-area" class="quiz-card">
        <h2>ðŸ”¥ Quiz Quiz India</h2>
        <p>Auto-Photo Fix Updated! âœ…</p>
        <button class="opt-btn" onclick="startQuiz()">Start Game</button>
    </div>

    <div id="quiz-area" class="quiz-card hidden">
        <div class="timer" id="timer">5</div>
        <h3 id="question-text">Taiyar...</h3>
        <div id="options-box"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAvYTv5CCqE3-l4koXl-7q_1jQG6JZ-rWQ",
            authDomain: "audi-45680.firebaseapp.com",
            projectId: "audi-45680",
            storageBucket: "audi-45680.firebasestorage.app",
            messagingSenderId: "739330497540",
            appId: "1:739330497540:web:e4913add2109dc0c34e951"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        let questions = [];
        let currentIdx = 0;
        let timerInt;

        window.startQuiz = async function() {
            try {
                const querySnapshot = await getDocs(collection(db, "Questions"));
                questions = [];
                querySnapshot.forEach((doc) => questions.push(doc.data()));
                
                if(questions.length > 0) {
                    document.getElementById('setup-area').classList.add('hidden');
                    document.getElementById('quiz-area').classList.remove('hidden');
                    showQuestion();
                } else { alert("Pehle Admin se naye sawal daalein!"); }
            } catch (e) { alert("Error: " + e); }
        }

        function showQuestion() {
            if(currentIdx >= questions.length) { /* Win logic */ return; }
            let q = questions[currentIdx];

            // --- âœ¨ SMART AUTO-PHOTO FIX âœ¨ ---
            let finalImg = "";
            if(q.imageUrl && q.imageUrl.length > 5) {
                finalImg = q.imageUrl;
            } else {
                // Sawal mein se sirf kaam ke words nikalo (Peheli 2 cheezein)
                let keywords = q.q.replace(/[?.,!]/g, "").split(' ').slice(0, 2).join(',');
                finalImg = `https://loremflickr.com/1280/720/${keywords},india`;
            }
            
            // Photo apply karna
            document.body.style.backgroundImage = `url('${finalImg}')`;
            // ----------------------------------

            document.getElementById('question-text').innerText = q.q;
            let box = document.getElementById('options-box');
            box.innerHTML = '';
            q.options.forEach((opt, i) => {
                let btn = document.createElement('button');
                btn.className = 'opt-btn';
                btn.innerText = opt;
                btn.onclick = () => { currentIdx++; showQuestion(); };
                box.appendChild(btn);
            });
            startTimer();
        }

        function startTimer() {
            let time = 5;
            document.getElementById('timer').innerText = time;
            clearInterval(timerInt);
            timerInt = setInterval(() => {
                time--; document.getElementById('timer').innerText = time;
                if(time <= 0) { clearInterval(timerInt); currentIdx++; showQuestion(); }
            }, 1000);
        }
    </script>
</body>
</html>
